# VPN — Virtual Private Network

Эта глава будет начинаться с сетевых решений, которые использовались в прошлом для соединения нескольких филиалов компании. Технический прогресс, такой как широкополосный доступ в Интернет, привел к появлению новых возможностей и новых концепций для этой проблемы, одной из которых является **виртуальная частная сеть (Virtual Private Network  - VPN)**. В этой главе вы узнаете, что означает термин VPN, как он развивался в течение последних нескольких десятилетий, почему она необходима для современных предприятий и как работают типичные VPN. Базовые сетевые концепции необходимы для понимания разнообразия возможностей, которые предлагают VPN.

**История**: в прежние времена обмен информацией между филиалами компании осуществлялся в основном по почте, телефону, а позднее по факсу. Но сегодня есть пять основных проблем для современных решений VPN, которые обсуждаются в этой главе.

Проблемы, с которыми сталкиваются компании, заключаются в следующем:

* Общее ускорение бизнес-процессов и растущая потребность в быстром и гибком обмене информацией между всеми филиалами компании привели к тому, что "старомодные" почтовые и даже факсимильные услуги оказались слишком медленными для современных требований.
* Технологии, такие как Groupware, **Customer Relationship Management (CRM)** и **Enterprise Resource Planning (ERP)**, используются для обеспечения продуктивной командной работы, и ожидается, что каждый сотрудник будет взаимодействовать.
* Почти каждое предприятие имеет несколько филиалов в разных местах и часто имеет полевых и домашних работников. Все они должны иметь возможность участвовать во внутреннем обмене информацией без задержек.
* Все компьютерные сети должны соответствовать высоким стандартам безопасности для обеспечения целостности, подлинности и стабильности данных.
* Необходимо обеспечить безопасный и гибкий доступ для мобильных устройств, включая новые стратегии для ноутбуков и современных смартфонов.

Эти факторы привели к необходимости сложных сетевых решений между офисами компаний по всему миру. Поскольку компьютерные сети соединяют все рабочие столы в одном месте, потребность в соединениях между местоположениями становится все более и более насущной.

Много лет назад вы могли арендовать только выделенные линии между вашими офисами. Эти линии были дорогостоящими, поэтому только крупные компании могли позволить себе подключить свои филиалы, чтобы обеспечить работу команды по всему миру. Для достижения этой цели на каждом узле должны были быть установлены быстрые и дорогостоящие соединения, которые стоили намного больше, чем обычный корпоративный доступ в интернет.

Концепция этого сетевого дизайна была основана на реальной сети между филиалами компании. Провайдер был необходим для подключения каждого местоположения, и было установлено физическое кабельное соединение между всеми филиалами. Как и телефонная сеть, для связи использовалась одна выделенная линия, соединяющая двух партнеров.

Безопасность для этой линии обеспечивалась выделенной сетью — каждое соединение между филиалами должно было устанавливаться по выделенной линии. Для компании с четырьмя филиалами (A, B, C и D) потребуется шесть выделенных линий.

![](/pics/pic1-1.png)

Кроме того, **серверы удаленного доступа (Remote Access Servers - RAS)** использовались для полевых или домашних работников, которые только временно подключались к сети компании. Эти люди должны были использовать специальные коммутируемые соединения (с модемом или линией ISDN), и компания выступала в качестве интернет-провайдера. Для каждого удаленного работника должна была быть настроена учетная запись удаленного доступа, и полевые работники могли подключаться только по этой линии. Телефонная компания предоставляла одну выделенную линию для каждого дозвона, и центральный филиал должен был убедиться, что всегда имеется достаточное количество телефонных линий.

Защищая кабели и сервер удаленного доступа, была установлена настоящая частная сеть с очень высокой стоимостью. Конфиденциальность в сети компании, охватывающей несколько филиалов, была достигнута за счет обеспечения безопасности линий и предоставления услуг только для точек подключения с жесткими проводами. Почти все задачи обеспечения безопасности и доступности были переданы поставщику услуг по очень высокой цене. Но при непосредственном подключении местоположений можно было добиться более высокой скорости передачи данных, чем при "обычном" интернет-соединении в то время.

## Широкополосный доступ в Интернет и VPN

В середине 1990-х годов рост Интернета и увеличение скорости дешевых интернет-соединений проложили путь для новых технологий. Многие разработчики, администраторы и, наконец, менеджеры обнаружили, что могут быть лучшие решения, чем тратить несколько сотен долларов, если не тысяч долларов, на выделенные и коммутируемые линии доступа.

Идея заключалась в том, чтобы использовать Интернет для связи между филиалами и в то же время обеспечить сохранность и секретность передаваемых данных. Короче говоря, обеспечить безопасные соединения между филиалами предприятия через недорогие линии с использованием Интернета. Это очень простое описание того, что такое VPN.

VPN-это:

* **Виртуальное**: это происходит потому, что нет реального прямого сетевого соединения между двумя (или более) партнерами связи, только виртуальное соединение, предоставляемое **программным обеспечением VPN**, реализуемым обычно через общедоступные Интернет-соединения.
* **Частное**: это связано с тем, что только члены компании, подключенные с помощью **программного обеспечения VPN**, могут читать переданные данные.

С помощью VPN ваши сотрудники в Сиднее могут работать с лондонским офисом, как если бы оба находились в одном и том же месте. Программное обеспечение VPN обеспечивает виртуальную сеть между этими местами, используя недорогое подключение к интернету. Эта сеть называется **виртуальной**, потому что реальное, выделенное сетевое соединение с партнером не устанавливается.

![](/pics/pic1-2.png)

VPN также можно описать как набор логических соединений, защищенных специальным программным обеспечением, которое обеспечивает конфиденциальность путем защиты конечных точек соединения.

Сегодня Интернет является сетевым носителем информации, и конфиденциальность достигается современными криптографическими методами.

## Как работает VPN?

Давайте рассмотрим на примере как работает VPN. The Virtual Entity Networks Inc. (VEN Inc.) имеет два филиала, Лондон и Сидней. Если австралийское отделение в Сиднее решит заключить контракт с поставщиком, то лондонскому отделению, возможно, потребуется немедленно сообщить об этом. Основная часть ИТ-инфраструктуры создана в Лондоне. В Сиднее есть двадцать человек, чья работа зависит от доступности данных, размещенных на лондонских серверах.

![](/pics/pic1-3.png)

Оба офиса оборудованы постоянной интернет-линией. Для обеспечения доступа персонала в интернет установлен маршрутизатор - шлюз. Этот маршрутизатор настроен на защиту локальной сети сайта от несанкционированного доступа с другой стороны — "злого" Интернета. Такой маршрутизатор, настроенный на блокирование специального трафика, можно назвать брандмауэром и должен быть установлен и настроен в каждой ветви, которая должна принимать участие в VPN.

Программное обеспечение VPN должно быть установлено на этом брандмауэре (или устройстве или сервере, защищенном им). Каждый современный брандмауэр включает эту функцию, и есть программное обеспечение VPN для всех аппаратных и программных платформ.

На следующем этапе программное обеспечение VPN должно быть настроено для установления соединения с другой стороной. Например, Лондонский VPN-сервер должен принимать соединения от Сиднейского сервера, а Сиднейский сервер должен подключаться к Лондону (или наоборот).

Если этот шаг выполнен успешно, то у компании есть работающая виртуальная сеть. Эти две ветви связаны через Интернет и могут работать вместе, как в реальной сети. Здесь у нас есть VPN без конфиденциальности, потому что любой интернет-маршрутизатор между Лондоном и Сиднеем может считывать обменные данные. Конкурент, получающий контроль над интернет-маршрутизатором, может считывать все соответствующие бизнес-данные, проходящие через виртуальную сеть.

Так как же сделать эту виртуальную сеть частной? Решением является шифрование. VPN-трафик между двумя ветвями заблокирован специальными ключами, и только компьютеры или лица, владеющие таким ключом, могут открыть этот замок и посмотреть на отправленные данные.

---
На самом деле все технологии шифрования могут быть взломаны. Расшифровка информации без правильного ключа - это всего лишь вопрос времени, силы и ресурсов. Очень хорошее объяснение этому есть в книге _Безопасность на основе времени_ Винна Швартау.

---

![](/pics/pic1-4.png)

Все данные, которые были отправлены из Сиднея в Лондон или из Лондона в Сидней, должны быть зашифрованы до и расшифрованы после передачи. Шифрование защищает данные в соединении точно так же, как стены туннеля защищают поезд от горы вокруг него. Это объясняет, почему виртуальные частные сети часто просто называют туннелями или VPN-туннелями, а технологию часто называют **туннелированием** — даже если в ней нет квантовой механики или другой магии.

Точный метод шифрования и предоставления ключей всем вовлеченным сторонам является одним из основных отличительных факторов между различными решениями VPN.

VPN-соединение обычно устанавливается между двумя маршрутизаторами доступа в Интернет, которые оснащены брандмауэром и программным обеспечением VPN. Программное обеспечение должно быть настроено для подключения к VPN-партнеру, брандмауэр должен быть настроен для обеспечения доступа, а данные, которыми обмениваются VPN-партнеры, должны быть защищены (шифрованием). Ключ шифрования должен быть предоставлен всем партнерам VPN, чтобы обмен данными мог быть прочитан только авторизованными партнерами VPN.

## Какие виртуальные частные сети используется?

В предыдущих примерах мы рассмотрели несколько возможных сценариев использования технологии VPN. Но здесь необходимо добавить одно типичное решение VPN. Все больше и больше предприятий предлагают своим клиентам или деловым партнерам защищенный доступ к соответствующим данныv для их деловых отношений, такие как Формулы заказа или данные о запасах. Таким образом, мы имеем три типичных сценария для VPN-решений на современных предприятиях:

* Интранет, охватывающий несколько подразделений компании
* Удаленный доступ для домашних или полевых работников с изменяющимися IP-адресами, мобильными устройствами и централизованной защитой.
* Экстранет для клиентов или деловых партнеров

Каждый из этих типичных сценариев требует особых соображений безопасности и настроек. Внешние домашние работники будут нуждаться в ином доступе к серверам в компании, чем клиенты и деловые партнеры. Фактически, доступ для деловых партнеров и клиентов должен быть строго ограничен.

Теперь, когда мы увидели, как VPN может безопасно соединять компанию различными способами, мы рассмотрим более подробно, как работают VPN. Чтобы понять функциональность, необходимо понять некоторые основные понятия сети.

Весь обмен данными в компьютерных сетях основан на протоколах. Протоколы подобны языкам или ритуалам, которые должны использоваться между партнерами по общению в сетях. Без правильного использования правильного протокола, коммуникация терпит неудачу.

## Сетевые концепции - протоколы и уровни
